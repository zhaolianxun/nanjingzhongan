<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="rxw/rxw.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="cropper/cropper.js"></script>
    <link href="cropper/cropper.css" rel="stylesheet" />
</head>
<body>
<a onclick="aa()">aaa</a>
<img />
<input type="file"/>
</body>
<script>
function aa(){
    cutImg({complete:function(params){
        rxw1.imgPreview(params.canvas.toDataURL(params.imgType))
    }})
}
//{complete:function({canvas:,imgType:}){},xRadio,yRadio}
    function cutImg(params){
       rxw1.chooseFile({chooseEnd:function(input){
           var file=input.files[0];
           if(!file.type || file.type.indexOf('image') != 0){
               alert('请选择一张图片');
           }else {
               var img = new Image();
               url = window.URL.createObjectURL(file) // 得到bolb对象路径，可当成普通的文件路径一样使用，赋值给src;
               rxw1.layer({
                   init:function(layer){
                       layer.style.padding='30px 0';
                       layer.innerHTML="<div style='margin:auto;width:300px;text-align: center;margin-bottom:30px'><button style='width:100px' name='cancel'>取消</button><span style='width:30px;display: inline-block'></span><button style='width:100px' name='confirm'>确定</button></div><img name='targetImg' style='margin:30px auto;display:block;' src='"+url+"'>";

                       var xRadio = params.xRadio||1;
                       var yRadio = params.yRadio||1;

                       $(layer).find('[name=targetImg]').cropper({
                           aspectRatio: xRadio / yRadio,
                           viewMode:1,
                           background:false
                       });

                       $(layer).find('[name=cancel]').click(function(){
                           $(layer).remove();
                       })

                       $(layer).find('[name=confirm]').click(function(){
                           var cas=$(layer).find('[name=targetImg]').cropper('getCroppedCanvas');
                           $(layer).remove();
                           if(params.complete)
                               params.complete({canvas:cas,imgType:file.type,fileName:file.name})

                       })
                   }
               })


           }

       }});
    }
</script>
</html>