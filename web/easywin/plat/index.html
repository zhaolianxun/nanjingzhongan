<!DOCTYPE html>
<head><title>控制台</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="http://at.alicdn.com/t/font_t7w55lj0ogtd42t9.css">
    <link rel="stylesheet" type="text/css" href="libs/default.css">
    <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">
    <script type="text/javascript" src="libs/default.js"></script>
    <script type="text/javascript" src="libs/jquery.min.js"></script>
    <style type="text/css">
        body {
        overflow: hidden
    }

    .topbar {
        position: absolute;
        width: 100%;
        height: 62px;
        background: #fff;
        border-bottom: 1px solid #e4e5e7
    }

    .leftbar {
        position: absolute;
        top: 62px;
        bottom: 0;
        left: 0;
        width: 200px;
        background: #fff;
        border-right: 1px solid #e4e5e7
    }

    .body-con {
        position: absolute;
        top: 62px;
        left: 200px;
        right: 0;
        bottom: 0;
        transition: left .4s;
        -moz-transition: left .4s;
        -webkit-transition: left .4s;
        -o-transition: left .4s
    }

    .loginframe {
        width: 100%;
        height: 100%
    }

    .logoutbt {
        line-height: 60px;
        font-size: 13px;
        float: right;
        margin-right: 50px;
        color: #337ab7
    }

    .logoutbt:hover {
        color: #555
    }</style>
</head>
<body>
<div class="topbar">
    <div style="width:200px;height:61px;background:#f7f9fa;border-right:1px solid #e4e5e7;float:left">
        <h3 style="cursor: pointer;text-align: center;">Easywin平台</h3>
    </div>
    <div onclick="hidesidebar()" style="cursor:pointer;color:#999;width:66px;border-right:1px solid #e4e5e7;float:left;height:61px;background:#f7f9fa;text-align:center;line-height:62px">
        <i class="icon iconfont icon-shiliangzhinengduixiang"></i>
    </div>
    <div>

        <a class="logoutbt" href="login.html">退出登陆</a>
        <a class="logoutbt" name="name" id="topname" style="margin-right:10px;display: none;"></a>
        <a id="proxyadmin" class="logoutbt" href="/proxy/u/v/admin" target="_blank" style="margin-right:10px;display:none">代理商后台</a>
    </div>
</div>
<div class="leftbar">
    <style class="cp-pen-styles">* {
        margin: 0;
        padding: 0;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box
    }

    ul {
        list-style-type: none
    }

    a {
        color: #b63b4d;
        text-decoration: none
    }

    .accordion {
        width: 100%;
        max-width: 360px;
        background: #fff
    }

    .accordion .link:hover {
        color: #999;
        -webkit-transition: all .5s ease
    }

    .accordion .link {
        display: block;
        padding: 15px 15px 15px 30px;
        color: #34495e;
        font-size: 14px;
        font-weight: 700;
        position: relative;
        -webkit-transition: all .4s ease;
        -o-transition: all .4s ease;
        transition: all .4s ease
    }

    .accordion li:last-child .link {
        border-bottom: 0
    }

    .accordion li i {
        position: absolute;
        top: 16px;
        left: 12px;
        font-size: 18px;
        color: #595959;
        -webkit-transition: all .4s ease;
        -o-transition: all .4s ease;
        transition: all .4s ease
    }

    .accordion li i.fa-chevron-down {
        right: 12px;
        left: auto;
        font-size: 16px
    }

    .accordion li.open .link {
        color: #999;
        border-bottom: 1px solid #e4e5e7
    }

    .accordion li.open i {
        color: #999
    }

    .accordion li.open i.fa-chevron-down {
        -webkit-transform: rotate(180deg);
        -ms-transform: rotate(180deg);
        -o-transform: rotate(180deg);
        transform: rotate(180deg)
    }

    .accordion li.default .submenu {
        display: block
    }

    .submenu {
        display: none;
        background: #fff;
        font-size: 14px
    }

    .submenu li {
        position: relative
    }

    .submenu a {
        display: block;
        text-decoration: none;
        color: #34495e;
        padding: 12px;
        padding-left: 55px;
        -webkit-transition: all .25s ease;
        -o-transition: all .25s ease;
        transition: all .25s ease;
        border-bottom: 1px solid #e4e5e7;
        font-weight: 700
    }

    .submenu a:hover {
        background: #fff;
        color: #555
    }</style>
    <body>
    <div style="border-bottom:1px solid #e4e5e7;height:120px;text-align:center">
        <img src="images/head.png" style="width:60px;margin-top:20px;margin-left:-25px">
        <div style="color:#777;margin-top:5px;margin-left:-25px" name="name"></div>
    </div>
    <ul id="accordion" class="accordion">
        <li id="tabchild2" class="default open">
            <div class="link">应用管理</div>
            <ul class="submenu">
                <li id="itemtab2">
                    <a href="javascript:memuClick('createapp');">
                        <i style="margin-left:20px;margin-top:-8px" class="icon iconfont icon-xinjian"></i>应用商店
                    </a>
                </li>
                <li id="itemtab3">
                    <a href="javascript:memuClick('myapp');">
                        <i style="font-size:14px;margin-left:22px;margin-top:-4px" class="icon iconfont icon-jinhuodan"></i>我的应用
                    </a>
                </li>
            </ul>
        </li>
        <li id="tabchild1" style="display: none;" class="default open">
            <div class="link" style="border-top:none">管理员</div>
            <ul class="submenu">
                <li id="itemtab1">
                    <a href="javascript:memuClick('userlist');">
                        <i style="margin-left:20px;margin-top:-7px" class="icon iconfont icon-gerenziliao"></i>用户管理
                    </a>
                </li>
                <li id="itemtab4">
                    <a href="javascript:memuClick('templatelist');">
                        <i style="font-size:14px;margin-left:22px;margin-top:-4px" class="icon iconfont icon-jinhuodan"></i>模板管理
                    </a>
                </li>
                <li id="itemtab5">
                    <a href="javascript:memuClick('applist');">
                        <i style="margin-left:20px;margin-top:-7px" class="icon iconfont icon-gerenziliao"></i>应用管理
                    </a>
                </li>
                <li id="itemtab6">
                    <a href="javascript:memuClick('agentlist');">
                        <i style="margin-left:20px;margin-top:-7px" class="icon iconfont icon-gerenziliao"></i>代理管理
                    </a>
                </li>
            </ul>
        </li>
        <li id="tabchild3" style="display: none;" class="default open">
            <div class="link">代理</div>
            <ul class="submenu">
                <li id="itemtab7">
                    <a href="javascript:memuClick('agentapplist');">
                        <i style="margin-left:20px;margin-top:-7px" class="icon iconfont icon-gerenziliao"></i>应用管理
                    </a>
                </li>
                <li id="itemtab8">
                    <a href="javascript:memuClick('agentuserlist');">
                        <i style="margin-left:20px;margin-top:-7px" class="icon iconfont icon-gerenziliao"></i>用户管理
                    </a>
                </li>
            </ul>
        </li>
    </ul>
    </body>
    <script>
        $('[name="name"]').html(localStorage.getItem('name'));
        var ifSuperadmin = localStorage.getItem('superadminIs');
        var agentIs = localStorage.getItem('agentIs');
        if(ifSuperadmin == 1){
            $('#tabchild1').show();
        }
        if(agentIs == 1){
            $('#tabchild3').show();
        }
        $(function () {
        (function (t, e) {
            this.el = t || {}, this.multiple = e || !1, this.el.find(".link").on("click", {
                el: this.el,
                multiple: this.multiple
            }, this.dropdown)
        }).prototype.dropdown = function (t) {
            var e = t.data.el;
            $this = $(this), $next = $this.next(), $next.slideToggle(), $this.parent().toggleClass("open"), t.data.multiple || e.find(".submenu").not($next).slideUp().parent().removeClass("open")
        }
    });
        function checkUrl(ele){
            var url = ele.contentWindow.location.href;
            var str = '/client/myapp.html';
            if(url == str){
                var myiframe = document.getElementById("loginframe");
                for (var i = 1; i <= 4; i++) {
                    var itemtab = document.getElementById("itemtab" + i);
                    itemtab.style.background = "none";
                }
                document.getElementById('itemtab3').style.background = "#f1f3f6";
            }
        }
    </script>
</div>
<div id="body-con" class="body-con">
    <iframe id="loginframe" class="loginframe" frameborder="0" onload="checkUrl(this)"></iframe>
</div>
</body>
<script type="text/javascript">var proxy = 0;
if (proxy == 1) {
    document.getElementById("proxyadmin").style.display = "block";
}


var urlObj = getQueryStringObject();
if (!urlObj.tab) {
    tabChange("createapp");
} else {
    tabChange(urlObj.tab);
}

function tabChange(_type) {
    var myiframe = document.getElementById("loginframe");
    for (var i = 1; i <= 5; i++) {
        var itemtab = document.getElementById("itemtab" + i);
        itemtab.style.background = "none";
    }
    var itemTab = "";
    if (_type == "userlist") {
        itemTab = "itemtab1";
        myiframe.src = "userlist.html";
    } else if (_type == "createapp") {
        itemTab = "itemtab2";
        myiframe.src = "appstore.html";
    } else if (_type == "myapp") {
        itemTab = "itemtab3";
        myiframe.src = "myapp.html";
    } else if (_type == "templatelist") {
        itemTab = "itemtab4";
        myiframe.src = "templatelist.html";
    } else if (_type == "applist") {
        itemTab = "itemtab5";
        myiframe.src = "applist.html";
    } else if (_type == "agentlist") {
        itemTab = "itemtab6";
        myiframe.src = "agentlist.html";
    }else if (_type == "agentapplist") {
        itemTab = "itemtab7";
        myiframe.src = "agentapplist.html";
    }else if (_type == "agentuserlist") {
        itemTab = "itemtab8";
        myiframe.src = "agentuserlist.html";
    }

    if (itemTab != "") {
        document.getElementById(itemTab).style.background = "#f1f3f6";
    }
}

function memuClick(_type) {
    window.location.href = "index.html?tab=" + _type;
}


function hidesidebar() {
    var ele = document.getElementById("body-con");
    if (ele.style.left == "0px") {
        ele.style.left = "200px";
        $('#topname').hide()
    } else {
        ele.style.left = "0px";
        $('#topname').show()
    }
}
</script>